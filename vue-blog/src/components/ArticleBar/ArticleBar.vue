<script setup lang="ts">
    import { ArticleDir } from '@/types/article'
    import { useRouter } from 'vue-router'
    import ImageBase from '@/config/config'

    defineOptions({
        name: 'ArticleBar'
    })

    const imageFormat = '?x-oss-process=image/resize,m_fill,h_220,w_348/format,webp'

    const { articles } = defineProps<{articles:ArticleDir[] | undefined}>()

    const router = useRouter()

    const handleJump = (id:string) => {
        router.push({name:'Blog',params:{id}})
    }

</script>

<template>
    <div class="float-post" v-for="(article, index) in articles" :key="index">
        <div class="article-content">
            <div class="article-image" @click="handleJump(article.id)">
                <img class="article-cover" v-lazy="ImageBase + article.image + imageFormat" alt="">
            </div>
            <div class="article-brief">
                <div class="article-title-link" @click="handleJump(article.id)">
                    <div class="article-link">{{article.title}}</div>
                </div>
                <div class="article-info">
                    <div class="article-wrap">
                        <span class="article-publish-date">
                            <i class="article-icon"><svg t="1659776517548" class="icon article" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3223" width="200" height="200"><path d="M233.944615 83.180308V47.104c0-25.993846 21.346462-47.104 47.812923-47.104 26.387692 0 47.812923 21.110154 47.812924 47.104v36.076308h299.559384V47.104c0-25.993846 21.425231-47.104 47.812923-47.104 26.466462 0 47.812923 21.110154 47.812923 47.104v36.076308h62.227693c97.122462 0 176.128 77.902769 176.128 173.607384V363.913846a46.710154 46.710154 0 0 1 0 18.589539v401.723077c0 95.940923-79.163077 173.843692-176.20677 173.843692l-621.252923-0.787692C76.327385 949.011692 6.144 874.653538 6.144 784.462769v-527.753846c0-95.625846 79.005538-173.528615 176.285538-173.528615h51.515077z m0 70.892307h-51.515077C124.770462 153.993846 77.981538 200.073846 77.981538 256.787692v69.316923a49.309538 49.309538 0 0 1 2.993231 0h810.299077v-69.316923c0-56.713846-46.788923-102.872615-104.369231-102.872615h-62.227692v54.429538c0 25.993846-21.346462 47.261538-47.812923 47.261539a47.497846 47.497846 0 0 1-47.812923-47.104v-54.587077H329.570462v54.429538c0 25.993846-21.425231 47.261538-47.812924 47.261539a47.497846 47.497846 0 0 1-47.812923-47.104v-54.587077z m657.408 266.31877H81.132308l-2.993231-0.07877v364.150154c0 56.713846 46.867692 102.793846 104.369231 102.793846H786.904615c57.580308 0 104.369231-46.158769 104.369231-102.793846V420.391385z m-383.606153 347.923692h-45.686154a47.497846 47.497846 0 0 1-47.812923-47.182769c0-25.993846 21.346462-47.104 47.812923-47.104h45.686154c26.387692 0 47.812923 21.110154 47.812923 47.104a47.419077 47.419077 0 0 1-47.812923 47.182769z m-213.464616-148.164923h-45.686154a47.497846 47.497846 0 0 1-47.812923-47.182769c0-25.993846 21.346462-47.104 47.812923-47.104h45.686154c26.387692 0 47.812923 21.110154 47.812923 47.104 0 26.072615-21.425231 47.182769-47.812923 47.182769z m213.464616 0h-45.686154a47.497846 47.497846 0 0 1-47.812923-47.182769c0-25.993846 21.346462-47.104 47.812923-47.104h45.686154c26.387692 0 47.812923 21.110154 47.812923 47.104 0 26.072615-21.425231 47.182769-47.812923 47.182769z m212.91323 0h-45.686154a47.497846 47.497846 0 0 1-47.812923-47.182769c0-25.993846 21.425231-47.104 47.812923-47.104h45.686154c26.466462 0 47.891692 21.110154 47.891693 47.104 0 26.072615-21.425231 47.182769-47.891693 47.182769z m-426.377846 148.086154h-45.686154a47.497846 47.497846 0 0 1-47.812923-47.104c0-25.993846 21.346462-47.104 47.812923-47.104h45.686154c26.387692 0 47.812923 21.110154 47.812923 47.104a47.419077 47.419077 0 0 1-47.812923 47.182769z m426.377846 0h-45.686154a47.497846 47.497846 0 0 1-47.812923-47.104c0-25.993846 21.425231-47.104 47.812923-47.104h45.686154c26.466462 0 47.891692 21.110154 47.891693 47.104 0 26.072615-21.425231 47.182769-47.891693 47.182769z" p-id="3224"></path></svg></i>
                            <span>发表于</span>
                            <span>{{ article.releasedate }}</span>
                        </span>
                        <span class="separator">|</span>
                        <span class="article-update-date">
                            <i class="article-icon"><svg t="1659776100617" class="icon article" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1279" width="200" height="200"><path d="M889.018182 256a462.894545 462.894545 0 0 0-764.509091-4.189091l-10.705455-32.349091a34.909091 34.909091 0 0 0-66.327272 23.272727l38.167272 114.269091a35.374545 35.374545 0 0 0 17.687273 20.247273 36.305455 36.305455 0 0 0 15.592727 3.490909 34.676364 34.676364 0 0 0 10.938182-1.629091l122.181818-40.96a34.909091 34.909091 0 1 0-22.109091-66.094545L186.181818 285.556364a384.698182 384.698182 0 0 1 98.210909-95.883637 393.309091 393.309091 0 1 1-169.890909 376.785455 34.909091 34.909091 0 1 0-69.818182 8.843636 463.592727 463.592727 0 0 0 461.032728 403.781818A463.592727 463.592727 0 0 0 889.018182 256z" p-id="1280" fill="#858585"></path><path d="M515.258182 578.327273a34.909091 34.909091 0 0 0 34.909091-34.909091v-221.323637a34.909091 34.909091 0 0 0-69.818182 0v186.181819h-152.669091a34.909091 34.909091 0 1 0 0 69.818181z" p-id="1281"></path></svg></i>
                            <span>更新于</span>
                            <span>{{article.updatedate}}</span>
                        </span>
                        <span class="separator">|</span>
                        <span class="article-position">
                            <i class="article-icon"><svg t="1659776563945" class="icon article" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5248" width="200" height="200"><path d="M67.8 692l40-249.1c2.3-14.3 9.6-27.2 20.7-36.5L504.9 90.1c50.7-42.6 126.4-36 168.9 14.8L809 266.1c42.6 50.8 36 126.5-14.8 169.1L417.7 751.6c-11.1 9.3-25.1 14.3-39.5 14.1l-251.9-3.9c-36.7-0.6-64.3-33.6-58.5-69.8z m125.3-212.7L167.6 638c-2.9 18 10.9 34.5 29.1 34.7l160.5 2.4c7.2 0.1 14.2-2.4 19.7-7l336.4-282.6c25.4-21.3 28.7-59.2 7.4-84.6l-96.4-115.1c-21.3-25.4-59.1-28.7-84.5-7.4L203.4 461.1c-5.5 4.6-9.2 11.1-10.3 18.2zM916.9 962H107.1C82.3 962 62 941.7 62 916.9s20.3-45.1 45.1-45.1H917c24.8 0 45.1 20.3 45.1 45.1-0.1 24.8-20.4 45.1-45.2 45.1zM916.9 781.8H647.1c-24.8 0-45.1-20.3-45.1-45.1s20.3-45.1 45.1-45.1H917c24.8 0 45.1 20.3 45.1 45.1-0.1 24.8-20.4 45.1-45.2 45.1z" p-id="5249"></path></svg></i>
                            <span>{{article.category}}</span>
                        </span>
                        <span class="separator">|</span>
                        <span class="article-tags">
                            <i class="article-icon"><svg t="1661492087817" class="icon article" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5699" width="200" height="200"><path d="M920.528912 444.49616l-340.111125-340.114737a135.932464 135.932464 0 0 0-96.155899-39.758503L200.418112 64.662657h-0.018063C125.275769 64.662657 64.301413 125.40943 64.301413 200.548159v283.673992a136.091412 136.091412 0 0 0 39.881326 96.199248l340.230335 340.241173a136.022775 136.022775 0 0 0 192.369598 0l283.74624-283.76069c53.128139-53.131752 53.128139-139.277583 0-192.405722z m-45.209673 147.192436l-283.746241 283.760691a72.064544 72.064544 0 0 1-101.924964 0l-340.212273-340.241173A72.187367 72.187367 0 0 1 128.241582 484.218538V200.548159A72.021195 72.021195 0 0 1 200.396437 128.602826l283.843776-0.039737a71.887535 71.887535 0 0 1 50.935389 21.053294l340.114737 340.1039a72.104281 72.104281 0 0 1 0.0289 101.968313z" fill="" p-id="5700"></path><path d="M384.002258 255.999097c-70.69543 0-128.003161 57.307731-128.003161 128.003161S313.306828 511.998194 384.002258 511.998194s127.999548-57.307731 127.999548-127.999549S454.690463 255.999097 384.002258 255.999097z m45.296371 173.29592a64.059379 64.059379 0 1 1 18.759396-45.292759 63.640337 63.640337 0 0 1-18.763008 45.292759z" p-id="5701"></path></svg></i>
                            <span>{{ article.lable }}</span>
                        </span>
                        <span class="separator">|</span>
                        <span class="article-tags">
                            <i class="article-icon"><svg t="1712309361203" class="icon article" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5929" width="128" height="128"><path d="M515.2 224c-307.2 0-492.8 313.6-492.8 313.6s214.4 304 492.8 304 492.8-304 492.8-304S822.4 224 515.2 224zM832 652.8c-102.4 86.4-211.2 140.8-320 140.8s-217.6-51.2-320-140.8c-35.2-32-70.4-64-99.2-99.2-6.4-6.4-9.6-12.8-16-19.2 3.2-6.4 9.6-12.8 12.8-19.2 25.6-35.2 57.6-70.4 92.8-102.4 99.2-89.6 208-144 329.6-144s230.4 54.4 329.6 144c35.2 32 64 67.2 92.8 102.4 3.2 6.4 9.6 12.8 12.8 19.2-3.2 6.4-9.6 12.8-16 19.2C902.4 585.6 870.4 620.8 832 652.8z" p-id="5930"></path><path d="M512 345.6c-96 0-169.6 76.8-169.6 169.6 0 96 76.8 169.6 169.6 169.6 96 0 169.6-76.8 169.6-169.6C681.6 422.4 604.8 345.6 512 345.6zM512 640c-67.2 0-121.6-54.4-121.6-121.6 0-67.2 54.4-121.6 121.6-121.6 67.2 0 121.6 54.4 121.6 121.6C633.6 582.4 579.2 640 512 640z" p-id="5931"></path></svg></i>
                            <span>{{ article.visits }}</span>
                        </span>
                    </div>
                </div>
                <div class="article-recount-text">{{article.intro}}</div>
            </div>
        </div>
    </div>
</template>

<style scoped lang="scss">
.article-content {
    display: flex;
    align-items: center;
    overflow: hidden;
    border: 0 solid;
    background: var(--theme-second-color);
    height: 220px;
    @include respond-to {
        flex-direction: column;
        height: auto;
    }
}
.article-brief {
    padding: 0 40px;
    width: 60%;
    @include respond-to {
        padding: 20px;
        width: 100%;
    }
}
.article-title-link {
    font-size: 24px;
    color: var(--word-main-color);
    font-weight: 1000;
    line-height: 1.5;
}
.article-wrap {
    margin: 5px 0;
    color: var(--word-second-color);
    font-size: 0.85em;
}
.article-wrap span{
    margin-right: 5px;
}
.article-icon {
    margin-right: 5px;
}
.article-image {
    overflow: hidden;
    width: 40%;
    height: 100%;
    @include respond-to {
        width: 100%;
        height: 230px;
    }
}
.article-cover {
    height: 100%;
    width: 100%;
    object-fit: cover;
}
</style>