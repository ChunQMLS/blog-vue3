import{g as e,h as a,i as l,j as t,k as r}from"./element-plus-C50n0kKT.js";import{M as o}from"./MainSidebar-YJSewFY6.js";import{A as s}from"./ArticleBar-F77Ui8iM.js";import{b as u}from"./vue-router-w7VblU2R.js";import{d as n,r as i,s as p,w as c,o as m,c as v,Q as d,O as g,K as y,a3 as f,M as j,B as b,u as h,a as _}from"./@vue-HJvXqiKQ.js";import{_ as x}from"./_plugin-vue_export-helper-NGi3vMWx.js";import{M as V,N as S,W as A}from"./aboutApi-WILlrg0U.js";import{B as k}from"./BlogEvent-tJ-7twqE.js";import{b as M}from"./index-ex-BpVPP.js";import{g as P}from"./articleApi-TW8o0zzT.js";import"./dayjs-_EBtpdas.js";import"./copy-to-clipboard-6z1FYTZW.js";import"./toggle-selection-UL9rmEGR.js";import"./@element-plus-9anORygP.js";import"./@vueuse-f9VkAUex.js";import"./lodash-es-plMgWLWd.js";import"./@ctrl-s6KMGca5.js";import"./@popperjs-QJLSoJI5.js";import"./config-p_8hFdbX.js";import"./pinia-H_Pi8DHn.js";import"./@codemirror-f2XyNq9l.js";import"./vue3-lazy-LYe7IwOc.js";import"./axios-9BcR6lUQ.js";const B={class:"search-bar container"},W=x(n({__name:"SearchBar",props:{categoryOptions:{type:Array,default:[]}},emits:["search"],setup(r,{emit:o}){var s,n,b,h;const _=u(),{categoryOptions:x}=r,V=i((null==(s=_.query.category)?void 0:s.toString())||""),S=i((null==(n=_.query.lable)?void 0:n.toString())||""),A=p((()=>V.value?x.filter((e=>e.category===V.value)):x));function k(){S.value=""}const M=i([(null==(b=_.query.date)?void 0:b.toString())||"",(null==(h=_.query.date)?void 0:h.toString())||""]),P=o;return c(S,(()=>{if(V.value)return;const e=x.find((e=>{if(e.lables.some((e=>e.lable===S.value)))return e}));V.value=(null==e?void 0:e.category)||""}),{immediate:!0}),c([V,S,M],(()=>{P("search",V.value,S.value,M.value)}),{immediate:!0}),(o,s)=>{const u=l,n=e,i=t,p=a;return m(),v("div",B,[d(n,{clearable:"",modelValue:V.value,"onUpdate:modelValue":s[0]||(s[0]=e=>V.value=e),onClear:k,placeholder:"选择分类",style:{flex:.2,minWidth:"100px"}},{default:g((()=>[(m(!0),v(y,null,f(r.categoryOptions,(e=>(m(),j(u,{key:e.category,lable:e.category,value:e.category},null,8,["lable","value"])))),128))])),_:1},8,["modelValue"]),d(n,{clearable:"",modelValue:S.value,"onUpdate:modelValue":s[1]||(s[1]=e=>S.value=e),placeholder:"选择标签",style:{flex:.2,minWidth:"100px"}},{default:g((()=>[(m(!0),v(y,null,f(A.value,(e=>(m(),j(i,{key:e.category,label:e.category},{default:g((()=>[(m(!0),v(y,null,f(e.lables,(e=>(m(),j(u,{key:e.lable,label:e.lable,value:e.lable},null,8,["label","value"])))),128))])),_:2},1032,["label"])))),128))])),_:1},8,["modelValue"]),d(p,{modelValue:M.value,"onUpdate:modelValue":s[2]||(s[2]=e=>M.value=e),type:"daterange","range-separator":"至","value-format":"YYYY-MM-DD","start-placeholder":"开始结束","end-placeholder":"结束日期",size:"default",style:{flex:.4,minWidth:"200px"}},null,8,["modelValue"])])}}}),[["__scopeId","data-v-ed7d3194"]]),q={class:"sticky-layout"},z=n({name:"Archives",__name:"Archives",setup(e){const a=u(),l=i({currentPage:1,list:[],pageSize:10,size:0,total:1,category:"",lable:"",start:"",end:""}),t=p((()=>({currentPage:l.value.currentPage,category:l.value.category,lable:l.value.lable,start:l.value.start,end:l.value.end})));b((()=>{P({currentPage:a.params.page||1}).then((e=>{l.value=e}))}));const n=M(),c=(e,a,r)=>{l.value.category=e,l.value.lable=a,l.value.start=r?r[0]:"",l.value.end=r?r[1]:"",P(t.value).then((e=>{l.value=e}))},v=e=>{l.value.currentPage=e,P(l.value).then((e=>{l.value=e}))};return(e,a)=>{const t=r;return m(),j(o,null,{left:g((()=>{var e;return[d(W,{"category-options":h(n).category,onSearch:c},null,8,["category-options"]),d(s,{articles:null==(e=l.value)?void 0:e.list},null,8,["articles"]),d(t,{class:"pagination",layout:"prev, pager, next","current-page":l.value.currentPage,total:l.value.total,"pager-count":5,onCurrentChange:v},null,8,["current-page","total"])]})),right:g((()=>[d(V),d(S),_("div",q,[d(k),d(A)])])),_:1})}}});export{z as default};
